{{- if or .Values.autoscaling.keda.enabled  .Values.autoscalingIpa.keda.enabled .Values.server.autoscaling.keda.enabled .Values.indexer.autoscaling.keda.enabled .Values.persist.autoscaling.keda.enabled .Values.analysis.autoscaling.keda.enabled .Values.policyenforcer.autoscaling.keda.enabled .Values.sbom.autoscaling.keda.enabled }}
apiVersion: v1
kind: Secret
metadata:
  labels:
    app: {{ template "xray.name" . }}
    chart: {{ template "xray.chart" . }}
    heritage: {{ .Release.Service }}
    release: {{ .Release.Name }}
  name: keda-rabbitmq-secret
stringData:
  host: {{ include "rabbitmq.urlWithCreds" . }}
{{- end }}